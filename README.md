
## Описаниесервиса

 Проектреализуетвеб-приложениедляуправленияпользователямии
 безопасноговыполненияоперацийсиспользованиемодноразовыхпаролей
 (OTP).Предоставляет интерфейсдляадминистрирования,регистрациюи
 авторизациюпользователей,управлениезащищеннымиоперациями,доставку
 OTP-кодовразнымиметодами(почта,SMS,Telegram,файл).

### Установка инастройкабазыданных
 Длякорректнойработыприложениянеобходимоустановитьбазуданных
 локально.БазаданныхдолжнабытьреализованаспомощьюPostgreSQLверсии
 17, поскольку взаимодействиесбазойданныхреализованочерезJDBC.

### Структура базыданных
 Структурабазыданныхвключаеттритаблицы:-- Таблица пользователей
 CREATETABLEusers(
 id SERIAL PRIMARYKEY,
 username VARCHAR(255) NOTNULLUNIQUE,
 password_hash VARCHAR(255) NOT NULL,
 role VARCHAR(50) NOTNULLCHECK(roleIN('ADMIN','USER'))
 );
 #### -- Таблица конфигурации OTP-кодов
 CREATETABLEotp_config (
 id SERIAL PRIMARYKEY,
 codelength INTEGER NOT NULL,
 lifetimeinminutes INTEGER NOT NULL
 );
INSERT INTO otp_config (codelength, lifetimeinminutes)
 VALUES (5, 7);
 #### -– создадим запись, которую потом будем менять-- Таблица одноразовых кодов
 CREATETABLEotp_codes (
 id SERIAL PRIMARYKEY,
 user_id BIGINT NOT NULL,

#### -- Внешний ключнатаблицу users
 operation_id INT,
 otp_code VARCHAR(10) NOT NULL,
 status VARCHAR(20) NOT NULLDEFAULT'ACTIVE'CHECK(status IN('ACTIVE', 'EXPIRED',
 'USED')),
 created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
 expires_at TIMESTAMP,
 description TEXT NOT NULL,
 CONSTRAINTfk_user FOREIGNKEY(user_id) REFERENCES users(id) ON DELETE CASCADE
 );

### Конфигурация подключения к базе данныхрасположенавпакете package
 org.example.util в файле DbConnection. Настройте её под свою среду разработки,
 указав нужные значения (адрес сервера, порт, название базы данных, имя
 пользователя и пароль).

## Архитектура сервиса
 Сервиссостоитизнесколькихслоев:
 ### API
 UserApi — Контроль регистрации и входа пользователей, инициация
 защищенныхоперацийипроверкаOTP-кодов.
 AdminApi —Управлениеконфигурацией OTP-кодовипросмотрсписка
 пользователей, удаление пользователей.
 ### Сервисы
 UserService — Управление пользователями (регистрация, авторизация,
 управление ролями).
 OtpService — Генерация, отправка и проверка OTP-кодов, управление
 защитнымиоперациями.
 ### DAO(DataAccess Object)
 UserDao —Интеграциястаблицейпользователей.
 OtpDao —ХранениеиуправлениеинформациейобOTP-кодах.
 ### Моделиданных
 User —Представление сущности пользователя с уникальными
 идентификаторами и хэшированнымипаролями.
 OtpCode —Информацияободноразовомкодеисвязаннойоперации.
 ### Утилиты
 EmailNotificationService — Отправка уведомлений по электронной почте.
 SmsSender — Эмулятор отправки SMS-сообщений.
 TelegramBot — Бот для интеграции с Telegram. Название бота- @vjqjnbyjrbot
 необходимо использовать свой chatId для настройки.
 FileSaver — Сохранение OTP-кодов в файле.

#### Необходимыебиблиотеки
 Установка с помощьюMaven,всебиблиотеки содержаться в pom.xml
 ### Команды сервиса
 Сервиспредлагаетследующийнаборкоманд:
 ### Зарегистрироваться
—Созданиеновойучетнойзаписи.
 ### Войти
—Аутентификацияпользователя.
### Получить список пользователей
—Доступнотолькопользователямсролью
 администратора.
### Удалить пользователя
—Доступнотолькопользователямсролью
 администратора.
### Изменить конфигурацию OTP
-кодов(времяжизнииколичествознаковв
 коде). —Доступнотолькопользователямсрольюадминистратора.
### Инициировать операцию и отправить OTP
-код—Инициациябезопасной
 операцииспоследующейотправкойодноразовогопароля(OTP).
### ПроверитьOTP-код
—Подтверждениеодноразовогопароля.
### Дополнительнореализовано:
 реализован механизм обработки устаревших OTP-кодов, который каждый час
 проверяет наличие активных OTP-кодов и помечает просроченные коды
 статусом EXPIRED